{"remainingRequest":"/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/node_modules/babel-loader/lib/index.js!/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/node_modules/eslint-loader/index.js??ref--13-0!/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/src/store/mutations.js","dependencies":[{"path":"/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/src/store/mutations.js","mtime":1559639244941},{"path":"/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport _defineProperty from \"/Users/siqi/Desktop/\\u5317\\u4EAC\\u7F51\\u7EDC\\u804C\\u4E1A\\u5B66\\u9662\\u8BFE\\u4EF6/vue/movie/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\n\nvar _MOVIE_LIST$CITY_LIST;\n\nimport { MOVIE_LIST, CITY_LIST, CHANGE_CINEMANAME, GOODS_LIST, INCREMENT, DECREMENT, CLEARCART, SHOWCART } from \"./mutation-type\";\nimport { Indicator } from 'mint-ui'; //mutations用于接收指令 操作state中的数据\n\nexport default (_MOVIE_LIST$CITY_LIST = {}, _defineProperty(_MOVIE_LIST$CITY_LIST, MOVIE_LIST, function (state, data) {\n  state.movies = data;\n  console.log(state.movies);\n  Indicator.close();\n}), _defineProperty(_MOVIE_LIST$CITY_LIST, CITY_LIST, function (state, data) {\n  var result = handleCity(data);\n  state.city_list = result;\n  Indicator.close();\n}), _defineProperty(_MOVIE_LIST$CITY_LIST, CHANGE_CINEMANAME, function (state, data) {\n  state.cinemaName = data;\n}), _defineProperty(_MOVIE_LIST$CITY_LIST, GOODS_LIST, function (state, data) {\n  state.goods_list = data;\n  Indicator.close();\n}), _defineProperty(_MOVIE_LIST$CITY_LIST, INCREMENT, function (state, id) {\n  goods_increment(state, id);\n}), _defineProperty(_MOVIE_LIST$CITY_LIST, DECREMENT, function (state, id) {\n  goods_decrement(state, id);\n}), _defineProperty(_MOVIE_LIST$CITY_LIST, CLEARCART, function (state) {\n  state.shop_cart_list.forEach(function (item, index) {\n    item.count = 0;\n  });\n  state.shop_cart_list = [];\n\n  if (state.shop_cart_list.length == 0) {\n    state.showShopCart = false;\n  }\n}), _defineProperty(_MOVIE_LIST$CITY_LIST, SHOWCART, function (state) {\n  if (state.shop_cart_list.length > 0) {\n    state.showShopCart = !state.showShopCart;\n  }\n}), _MOVIE_LIST$CITY_LIST); //处理获取来的城市数据\n\nfunction handleCity(data) {\n  var result = {};\n  var city_pre = [];\n  var city_pre_list = []; //将城市的首字母提出来,所有城市名称提出来。\n\n  for (var i = 0; i < data.length; i++) {\n    city_pre.push(data[i]['city_pre'].toUpperCase()); //city_pre_list.push(data[i]['city_name']);\n  } //数组去重并排序\n\n\n  city_pre = uniq(city_pre).sort();\n\n  city_pre_list = function () {\n    var json = {};\n    city_pre.forEach(function (item, index) {\n      json[item] = [];\n      data.forEach(function (item_j) {\n        if (item_j.city_pre.toUpperCase() == item) {\n          json[item].push(item_j['city_name']);\n        }\n      });\n    });\n    return json;\n  }();\n\n  result['first'] = city_pre;\n  result['list'] = city_pre_list;\n  return result;\n} //去重\n\n\nfunction uniq(array) {\n  var temp = []; //一个新的临时数组\n\n  for (var i = 0; i < array.length; i++) {\n    if (temp.indexOf(array[i]) == -1) {\n      temp.push(array[i]);\n    }\n  }\n\n  return temp;\n} //处理用户加入购物车后更改goods_list的数据的count属性值\n\n\nfunction goods_increment(state, id) {\n  var flag = true;\n  state.goods_list.forEach(function (item, index) {\n    item.data.forEach(function (item_n) {\n      if (item_n.id == id) {\n        item_n.count += 1;\n        state.shop_cart_list.forEach(function (item_cart, index) {\n          if (item_cart.id == id) {\n            flag = false;\n          }\n        });\n\n        if (flag) {\n          state.shop_cart_list.push(item_n);\n        }\n      }\n    });\n  });\n} //处理用户点击减少卖品个数\n\n\nfunction goods_decrement(state, id) {\n  state.shop_cart_list.forEach(function (item, index) {\n    if (item.id == id && item.count > 0) {\n      item.count -= 1;\n    }\n\n    if (item.count == 0) {\n      state.shop_cart_list.splice(index, 1);\n    }\n  });\n\n  if (state.shop_cart_list.length == 0) {\n    state.showShopCart = false;\n  }\n}",{"version":3,"sources":["/Users/siqi/Desktop/北京网络职业学院课件/vue/movie/src/store/mutations.js"],"names":["MOVIE_LIST","CITY_LIST","CHANGE_CINEMANAME","GOODS_LIST","INCREMENT","DECREMENT","CLEARCART","SHOWCART","Indicator","state","data","movies","console","log","close","result","handleCity","city_list","cinemaName","goods_list","id","goods_increment","goods_decrement","shop_cart_list","forEach","item","index","count","length","showShopCart","city_pre","city_pre_list","i","push","toUpperCase","uniq","sort","json","item_j","array","temp","indexOf","flag","item_n","item_cart","splice"],"mappings":"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","sourcesContent":["import { MOVIE_LIST, CITY_LIST, CHANGE_CINEMANAME, GOODS_LIST, INCREMENT, DECREMENT, CLEARCART, SHOWCART } from './mutation-type'\nimport { Indicator } from 'mint-ui';\n//mutations用于接收指令 操作state中的数据\nexport default {\n    //获取影院上映的影片信息\n    [MOVIE_LIST](state, data) {\n        state.movies = data;\n        console.log(state.movies);\n        Indicator.close();\n    },\n    //城市列表信息\n    [CITY_LIST](state, data) {\n        let result = handleCity(data);\n        state.city_list = result;\n        Indicator.close();\n    },\n    //更改当前所选择的影院信息\n    [CHANGE_CINEMANAME](state, data) {\n        state.cinemaName = data;\n    },\n    //卖品列表信息\n    [GOODS_LIST](state,data){\n        state.goods_list = data;       \n        Indicator.close();\n    },\n    //添加卖品到购物车\n    [INCREMENT] (state,id){\n        goods_increment(state,id);\n    },\n    [DECREMENT] (state,id){\n        goods_decrement(state,id);\n    },\n    [CLEARCART] (state){\n        state.shop_cart_list.forEach(function (item,index){\n            item.count = 0;\n        });\n        state.shop_cart_list = [];\n        if( state.shop_cart_list.length == 0 ){\n            state.showShopCart = false;\n        }\n    },\n    [SHOWCART] (state){\n        if( state.shop_cart_list.length > 0 ){\n            state.showShopCart = !state.showShopCart;\n        }       \n    }\n}\n//处理获取来的城市数据\nfunction handleCity(data) {\n    let result = {};\n    let city_pre = [];\n    let city_pre_list = [];\n    //将城市的首字母提出来,所有城市名称提出来。\n    for (var i = 0; i < data.length; i++) {\n        city_pre.push(data[i]['city_pre'].toUpperCase());\n        //city_pre_list.push(data[i]['city_name']);\n    }\n    //数组去重并排序\n    city_pre = uniq(city_pre).sort();\n    city_pre_list = (function () {\n        let json = {};\n        city_pre.forEach(function (item, index) {\n\n            json[item] = [];\n            data.forEach(function (item_j) {\n                if (item_j.city_pre.toUpperCase() == item) {\n                    json[item].push(item_j['city_name']);\n                }\n            })\n        })\n        return json;\n    })()\n    result['first'] = city_pre;\n    result['list'] = city_pre_list;\n    return result;\n\n}\n//去重\nfunction uniq(array) {\n    var temp = []; //一个新的临时数组\n    for (var i = 0; i < array.length; i++) {\n        if (temp.indexOf(array[i]) == -1) {\n            temp.push(array[i]);\n        }\n    }\n    return temp;\n}\n//处理用户加入购物车后更改goods_list的数据的count属性值\nfunction goods_increment(state,id){ \n    let flag = true;\n    state.goods_list.forEach(function (item,index){\n        item.data.forEach(function (item_n){\n            if( item_n.id == id ){\n                item_n.count += 1;\n                state.shop_cart_list.forEach(function (item_cart,index){\n                    if( item_cart.id == id ){\n                        flag = false;\n                    }\n                })\n                if( flag ){\n                   state.shop_cart_list.push(item_n); \n                }       \n            }\n        })\n    })\n}\n//处理用户点击减少卖品个数\nfunction goods_decrement(state,id){\n    state.shop_cart_list.forEach(function (item,index){\n        if( item.id == id&&item.count>0 ){\n            item.count -= 1;\n        }\n        if( item.count == 0 ){\n            state.shop_cart_list.splice(index,1);\n        }\n    });\n    if( state.shop_cart_list.length == 0 ){\n        state.showShopCart = false;\n    }\n}"]}]}