{"code":"(function(t){function e(e){for(var n,o,c=e[0],r=e[1],l=e[2],d=0,_=[];d<c.length;d++)o=c[d],s[o]&&_.push(s[o][0]),s[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(_.length)_.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,c=1;c<i.length;c++){var r=i[c];0!==s[r]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},s={app:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t[\"default\"]}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\";var c=window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;a.push([0,\"chunk-vendors\"]),i()})({0:function(t,e,i){t.exports=i(\"56d7\")},\"01b4\":function(t,e,i){t.exports=i.p+\"assets/img/W020190515497830468950.c9829be8.jpg\"},\"10a0\":function(t,e,i){},\"338b\":function(t,e,i){\"use strict\";var n=i(\"5bb3\"),s=i.n(n);s.a},\"3d07\":function(t,e,i){},\"56d7\":function(t,e,i){\"use strict\";i.r(e);i(\"cadf\"),i(\"551c\"),i(\"f751\"),i(\"097d\");var n,s=i(\"2b0e\"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"app\"}},[i(\"keep-alive\",[i(\"router-view\",{attrs:{movies:t.movies,cinemaName:t.cinemaName}})],1),i(\"TabBar\")],1)},o=[],c=i(\"cebc\"),r=i(\"2f62\"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[i(\"mt-tabbar\",{model:{value:t.currentId,callback:function(e){t.currentId=e},expression:\"currentId\"}},[i(\"mt-tab-item\",{attrs:{id:\"movie\"}},[i(\"i\",{staticClass:\"iconfont\"},[t._v(\"\")]),t._v(\"\\n      电影\\n    \")]),i(\"mt-tab-item\",{attrs:{id:\"goods\"}},[i(\"i\",{staticClass:\"iconfont\"},[t._v(\"\")]),t._v(\"\\n      卖品\\n    \")]),i(\"mt-tab-item\",{attrs:{id:\"mine\"}},[i(\"i\",{staticClass:\"iconfont\"},[t._v(\"\")]),t._v(\"\\n      我的\\n    \")])],1)],1)},u=[],d=(i(\"28a5\"),{data:function(){return{currentId:window.location.href.split(\"#\")[1].substr(1)}},watch:{currentId:function(t,e){this.$router.push(\"/\"+t)}}}),_=d,m=(i(\"72ba\"),i(\"2877\")),p=Object(m[\"a\"])(_,l,u,!1,null,\"3e8f5de0\",null),f=p.exports,h={name:\"app\",data:function(){return{}},beforeMount:function(){this.$Indicator.open(\"加载中...\"),this.$store.dispatch(\"movie_list\")},computed:Object(c[\"a\"])({},Object(r[\"b\"])([\"movies\",\"cinemaName\"])),components:{TabBar:f}},v=h,b=(i(\"7c55\"),Object(m[\"a\"])(v,a,o,!1,null,null,null)),g=b.exports,w=i(\"76a0\"),C=i.n(w),y=(i(\"aa35\"),i(\"8c4f\")),x={movies:[],city_list:{},cinemaName:\"\",goods_list:[],shop_cart_list:[],showShopCart:!1},j=\"movie_list\",O=\"city_list\",$=\"change_cinemaName\",k=\"goods_list\",E=\"increment\",N=\"decrement\",S=\"clearCart\",I=\"show_cart\",H=i(\"bc3a\"),A=i.n(H),M={movie_list:function(t){var e=t.commit,i=function(){return A.a.get(\"https://www.bestqingshan.top/movie/cinemasmovies.php\")},n=function(){return A.a.get(\"https://www.bestqingshan.top/movie/cinemas.php?page=0&pagesize=10\")};A.a.all([i(),n()]).then(function(t){e(j,t)})},city_list:function(t){var e=t.commit,i=\"https://www.bestqingshan.top/movie/citys.php\";A.a.get(i).then(function(t){var i=t.data.citys;e(O,i)})},change_cinemaName:function(t,e){var i=t.commit;i($,e)},goods_list:function(t){var e=t.commit,i=\"https://www.bestqingshan.top/movie/product.php\";A.a.get(i).then(function(t){var i=t.data.result;e(k,i)})},increment:function(t,e){var i=t.commit;i(E,e)},decrement:function(t,e){var i=t.commit;i(N,e)},clearCart:function(t){var e=t.commit;e(S)},show_cart:function(t){var e=t.commit;e(I)}},T={},B=T,P=(i(\"55dd\"),i(\"bd86\")),q=(i(\"ac6a\"),n={},Object(P[\"a\"])(n,j,function(t,e){t.movies=e,console.log(t.movies),w[\"Indicator\"].close()}),Object(P[\"a\"])(n,O,function(t,e){var i=D(e);t.city_list=i,w[\"Indicator\"].close()}),Object(P[\"a\"])(n,$,function(t,e){t.cinemaName=e}),Object(P[\"a\"])(n,k,function(t,e){t.goods_list=e,w[\"Indicator\"].close()}),Object(P[\"a\"])(n,E,function(t,e){U(t,e)}),Object(P[\"a\"])(n,N,function(t,e){z(t,e)}),Object(P[\"a\"])(n,S,function(t){t.shop_cart_list.forEach(function(t,e){t.count=0}),t.shop_cart_list=[],0==t.shop_cart_list.length&&(t.showShopCart=!1)}),Object(P[\"a\"])(n,I,function(t){t.shop_cart_list.length>0&&(t.showShopCart=!t.showShopCart)}),n);function D(t){for(var e={},i=[],n=[],s=0;s<t.length;s++)i.push(t[s][\"city_pre\"].toUpperCase());return i=W(i).sort(),n=function(){var e={};return i.forEach(function(i,n){e[i]=[],t.forEach(function(t){t.city_pre.toUpperCase()==i&&e[i].push(t[\"city_name\"])})}),e}(),e[\"first\"]=i,e[\"list\"]=n,e}function W(t){for(var e=[],i=0;i<t.length;i++)-1==e.indexOf(t[i])&&e.push(t[i]);return e}function U(t,e){var i=!0;t.goods_list.forEach(function(n,s){n.data.forEach(function(n){n.id==e&&(n.count+=1,t.shop_cart_list.forEach(function(t,n){t.id==e&&(i=!1)}),i&&t.shop_cart_list.push(n))})})}function z(t,e){t.shop_cart_list.forEach(function(i,n){i.id==e&&i.count>0&&(i.count-=1),0==i.count&&t.shop_cart_list.splice(n,1)}),0==t.shop_cart_list.length&&(t.showShopCart=!1)}s[\"default\"].use(r[\"a\"]);var G=new r[\"a\"].Store({state:x,actions:M,mutations:q,getters:B}),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{attrs:{id:\"movie_list\"}},[t.movies[0]?n(\"mt-header\",{attrs:{title:t.cinemaName?t.cinemaName:t.movies[0].data.result.cinema_info.name}},[n(\"router-link\",{attrs:{slot:\"right\",to:\"/select_cinema\"},slot:\"right\"},[n(\"i\",{staticClass:\"iconfont\"},[t._v(\"\")])]),n(\"i\",{staticClass:\"iconfont\",attrs:{slot:\"left\"},slot:\"left\"},[t._v(\"\")])],1):t._e(),n(\"div\",{staticClass:\"carousel\"},[n(\"mt-swipe\",{staticClass:\"mint-swipe\",attrs:{auto:4e3}},[n(\"mt-swipe-item\",[n(\"img\",{attrs:{src:i(\"01b4\"),alt:\"\"}})]),n(\"mt-swipe-item\",[n(\"img\",{attrs:{src:i(\"6239\"),alt:\"\"}})]),n(\"mt-swipe-item\",[n(\"img\",{attrs:{src:i(\"b9a8\"),alt:\"\"}})]),n(\"mt-swipe-item\",[n(\"img\",{attrs:{src:i(\"c781\"),alt:\"\"}})])],1)],1),n(\"div\",{style:{overflow:\"auto\",height:t.winH-187+\"px\"}},[t.movies[0]?n(\"div\",{staticClass:\"movies_list\"},t._l(t.movies[0].data.result.lists,function(e,i){return n(\"div\",[n(\"div\",{staticClass:\"movies_list_img\"},[n(\"img\",{attrs:{src:e.pic_url,alt:\"\"}})]),n(\"div\",{staticClass:\"movies_list_name\"},[n(\"h6\",[t._v(\"片名:\"+t._s(e.movieName))]),n(\"span\",[t._v(\"简介: \"+t._s(e.broadcast[0].type)+\" \"+t._s(e.broadcast[0].language)+\" -- ¥\"+t._s(e.broadcast[0].price))])]),n(\"div\",{staticClass:\"movies_list_time\"},[n(\"p\",[t._v(t._s(e.broadcast[0].time))]),n(\"mt-button\",{attrs:{size:\"small\"}},[t._v(\"购票\")])],1)])}),0):t._e()]),n(\"div\",[n(\"router-view\",{attrs:{cinema_list:t.movies[1]}})],1)],1)},Q=[],R=(i(\"4917\"),i(\"3b2b\"),{props:{movies:{type:Array,default:[]},cinemaName:{type:String,default:\"\"}},data:function(){return{winH:0}},mounted:function(){this.winH=document.documentElement.clientHeight},methods:{GetQueryString:function(t){var e=new RegExp(\"(^|&)\"+t+\"=([^&]*)(&|$)+\"),i=window.location.href.split(\"?\")[1]?window.location.href.split(\"?\")[1].match(e):null;return null!=i?decodeURIComponent(i[2]):null},setH:function(){this.$refs.movie_list_dom.style.height=document.documentElement.clientHeight-187+\"px\"}},watch:{$route:function(t,e){var i=this.GetQueryString(\"cinemaName\");i&&this.$store.dispatch(\"change_cinemaName\",i)}}}),F=R,K=(i(\"9181\"),Object(m[\"a\"])(F,J,Q,!1,null,\"2303f8e6\",null)),L=K.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\")},X=[],Y={data:function(){return{}}},Z=Y,tt=Object(m[\"a\"])(Z,V,X,!1,null,\"ac29235e\",null),et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"select_cinema\"}},[i(\"mt-header\",{attrs:{title:\"北京\"}},[i(\"router-link\",{attrs:{slot:\"left\",to:\"/\"},slot:\"left\"},[i(\"mt-button\",{attrs:{icon:\"back\"}},[t._v(\"返回\")])],1),i(\"router-link\",{staticClass:\"iconfont\",attrs:{slot:\"right\",to:\"/select_city\"},slot:\"right\"},[t._v(\"\")])],1),i(\"div\",{staticClass:\"cinema_list\"},t._l(t.cinema_list.data.data,function(e,n){return i(\"div\",{on:{click:function(i){return t.select_cinema(e.cinemaName)}}},[i(\"mt-cell-swipe\",{attrs:{title:e.cinemaName,id:e.id}}),i(\"p\",[t._v(t._s(e.address))])],1)}),0),i(\"div\",[i(\"router-view\")],1)],1)},nt=[],st={props:{cinema_list:{type:Object,default:{}}},data:function(){return{}},mounted:function(){},methods:{select_cinema:function(t){this.$router.push({path:\"/\",query:{cinemaName:t}})}}},at=st,ot=(i(\"338b\"),Object(m[\"a\"])(at,it,nt,!1,null,\"9b4f15ac\",null)),ct=ot.exports,rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"select_city\"}},[i(\"mt-header\",{attrs:{title:\"当前城市:北京\"}},[i(\"router-link\",{attrs:{slot:\"left\",to:\"/\"},slot:\"left\"},[i(\"mt-button\",{attrs:{icon:\"back\"}},[t._v(\"返回\")])],1)],1),t.city_list?i(\"mt-index-list\",t._l(t.city_list[\"first\"],function(e,n){return i(\"mt-index-section\",{attrs:{index:e}},t._l(t.city_list[\"list\"][e],function(t,e){return i(\"mt-cell\",{attrs:{title:t,onClick:\"alert('暂时不支持城市切换哦')\"}})}),1)}),1):t._e()],1)},lt=[],ut={data:function(){return{}},beforeMount:function(){this.$Indicator.open(\"加载中...\"),this.$store.dispatch(\"city_list\")},computed:Object(c[\"a\"])({},Object(r[\"b\"])([\"city_list\"]))},dt=ut,_t=(i(\"adc8\"),Object(m[\"a\"])(dt,rt,lt,!1,null,\"4c484630\",null)),mt=_t.exports,pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"goods\"}},[t.movies[0]?i(\"mt-header\",{attrs:{title:t.cinemaName?t.cinemaName:t.movies[0].data.result.cinema_info.name}},[i(\"router-link\",{attrs:{slot:\"right\",to:\"/select_cinema\"},slot:\"right\"},[i(\"i\",{staticClass:\"iconfont\"},[t._v(\"\")])]),i(\"i\",{staticClass:\"iconfont\",attrs:{slot:\"left\"},slot:\"left\"},[t._v(\"\")])],1):t._e(),t.goods_list?i(\"div\",{staticClass:\"goods_list\",style:{overflow:\"auto\",height:t.winH-134+\"px\"}},[i(\"div\",{staticClass:\"goods_list_nav\"},t._l(t.goods_list,function(e,n){return i(\"h6\",{class:{active:t.idx==n},on:{click:function(i){return t.changeIdx(n,e.id)}}},[t._v(t._s(e.title))])}),0),i(\"div\",{staticClass:\"goods_list_con\"},[i(\"div\",[i(\"h6\",[t._v(t._s(t.item_list.title))]),t._l(t.item_list.data,function(e,n){return i(\"div\",{staticClass:\"list\"},[i(\"dl\",[i(\"dt\",[i(\"img\",{attrs:{src:e.img,alt:\"\"}})]),i(\"dd\",{staticClass:\"goods_list_des\"},[i(\"strong\",[t._v(t._s(e.title))]),i(\"span\",[t._v(t._s(e.des))]),i(\"i\",[t._v(\"¥\"+t._s(e.price))])]),i(\"dd\",{staticClass:\"goods_list_add_shopcart\"},[i(\"InAndDe\",{attrs:{shop_cart_list:t.shop_cart_list,item:e}})],1)])])})],2)])]):t._e(),i(\"ShopCart\",{attrs:{shop_cart_list:t.shop_cart_list,show_cart:t.showShopCart,winH:t.winH}})],1)},ft=[],ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"shop_cart\"}},[i(\"div\",{staticClass:\"shopCart\"},[i(\"div\",{staticClass:\"cart\",on:{click:t.show_shopCart}},[i(\"i\",{staticClass:\"iconfont\"},[t._v(\"\")]),i(\"b\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.goods_count>0,expression:\"goods_count>0\"}]},[t._v(t._s(t.goods_count))])]),i(\"div\",{staticClass:\"price\"},[t._v(\"¥\"+t._s(t.total_price))])]),t._m(0),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show_cart,expression:\"show_cart\"}],staticClass:\"shopCart_list\"},[i(\"div\",{staticClass:\"mask\",style:{height:t.maskHB.h,bottom:t.maskHB.b}}),i(\"div\",{staticClass:\"shopCart_list_tit\"},[i(\"div\",{staticClass:\"maipin\"},[t._v(\"已选卖品\")]),i(\"div\",{staticClass:\"clearShopCart\",on:{click:t.clear_cart}},[t._v(\"清空购物车\")])]),i(\"div\",{staticStyle:{\"max-height\":\"120px\",overflow:\"auto\"}},t._l(t.shop_cart_list,function(e,n){return i(\"div\",{staticClass:\"ShopCart_list_con\"},[i(\"div\",{staticClass:\"goods_name\"},[t._v(\"\\n                    \"+t._s(e.title)+\"\\n                \")]),i(\"div\",{staticClass:\"goods_price\"},[t._v(\"¥\"+t._s(e.count*e.price))]),i(\"div\",{staticClass:\"add_cart\"},[i(\"InAndDe\",{attrs:{shop_cart_list:t.shop_cart_list,item:e}})],1)])}),0)])])},vt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"calculate\"},[i(\"button\",{staticClass:\"calculate_btn\"},[t._v(\"结算\")])])}],bt=(i(\"c5f6\"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[i(\"i\",{staticClass:\"iconfont\",on:{click:function(e){return t.decrement_goods(t.item.id)}}},[t._v(\"\")]),i(\"span\",[t._v(t._s(t.item.count))]),i(\"i\",{staticClass:\"iconfont\",on:{click:function(e){return t.increment_goods(t.item.id)}}},[t._v(\"\")])])}),gt=[],wt={props:{shop_cart_list:{type:Array},item:{type:Object}},data:function(){return{}},methods:{increment_goods:function(t){this.$store.dispatch(\"increment\",t)},decrement_goods:function(t){this.$store.dispatch(\"decrement\",t)}}},Ct=wt,yt=(i(\"5db2\"),Object(m[\"a\"])(Ct,bt,gt,!1,null,\"34ee4478\",null)),xt=yt.exports,jt={props:{shop_cart_list:{type:Array},show_cart:{type:Boolean},winH:{type:Number}},data:function(){return{}},methods:{clear_cart:function(){this.$store.dispatch(\"clearCart\")},show_shopCart:function(){this.$store.dispatch(\"show_cart\")}},components:{InAndDe:xt},computed:{total_price:function(){var t=0;return this.shop_cart_list.forEach(function(e,i){t+=e.count*e.price}),t},goods_count:function(){return this.shop_cart_list.length},maskHB:function(){var t=this.shop_cart_list.length>3?3:this.shop_cart_list.length,e=this.winH-134-40*t-40+\"px\",i=40*t+40+\"px\";return{h:e,b:i}}}},Ot=jt,$t=(i(\"63dd\"),Object(m[\"a\"])(Ot,ht,vt,!1,null,\"20ac8b37\",null)),kt=$t.exports,Et={props:{movies:{type:Array,default:[]},cinemaName:{type:String,default:\"\"}},data:function(){return{winH:0,idx:0,item_list:[]}},beforeMount:function(){this.$Indicator.open(\"加载中...\"),this.$store.dispatch(\"goods_list\")},mounted:function(){this.winH=document.documentElement.clientHeight},methods:{changeIdx:function(t,e){this.idx=t,this.get_item_list(e)},get_item_list:function(t){var e=this.goods_list.filter(function(e,i){return e.id==t});this.item_list=e[0]}},computed:Object(c[\"a\"])({},Object(r[\"b\"])([\"goods_list\",\"shop_cart_list\",\"showShopCart\"])),components:{ShopCart:kt,InAndDe:xt},watch:{goods_list:function(){this.item_list=this.goods_list[0]}}},Nt=Et,St=(i(\"a541\"),Object(m[\"a\"])(Nt,pt,ft,!1,null,\"35e50e02\",null)),It=St.exports,Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[t._v(\"\\n    我是我的组件\\n\")])},At=[],Mt={data:function(){return{}}},Tt=Mt,Bt=Object(m[\"a\"])(Tt,Ht,At,!1,null,\"09b42ece\",null),Pt=Bt.exports,qt=[{path:\"/movie\",component:L,children:[{path:\"/movie_detail/:id\",component:et},{path:\"/select_cinema\",component:ct,children:[{path:\"/select_city\",component:mt}]}]},{path:\"/goods\",component:It},{path:\"/mine\",component:Pt},{path:\"/\",redirect:\"/movie\"}];s[\"default\"].use(C.a),s[\"default\"].prototype.$Indicator=w[\"Indicator\"],s[\"default\"].prototype.$Toast=w[\"Toast\"],s[\"default\"].use(y[\"a\"]);var Dt=new y[\"a\"]({linkActiveClass:\"active\",routes:qt});s[\"default\"].config.productionTip=!1,new s[\"default\"]({render:function(t){return t(g)},store:G,router:Dt}).$mount(\"#app\")},\"5bb3\":function(t,e,i){},\"5c48\":function(t,e,i){},\"5db2\":function(t,e,i){\"use strict\";var n=i(\"7bb0\"),s=i.n(n);s.a},6239:function(t,e,i){t.exports=i.p+\"assets/img/W020190515497586396316.b4feef1b.jpg\"},\"63dd\":function(t,e,i){\"use strict\";var n=i(\"3d07\"),s=i.n(n);s.a},\"72ba\":function(t,e,i){\"use strict\";var n=i(\"df86\"),s=i.n(n);s.a},\"7bb0\":function(t,e,i){},\"7c55\":function(t,e,i){\"use strict\";var n=i(\"5c48\"),s=i.n(n);s.a},9164:function(t,e,i){},9181:function(t,e,i){\"use strict\";var n=i(\"9164\"),s=i.n(n);s.a},\"929e\":function(t,e,i){},a541:function(t,e,i){\"use strict\";var n=i(\"929e\"),s=i.n(n);s.a},adc8:function(t,e,i){\"use strict\";var n=i(\"10a0\"),s=i.n(n);s.a},b9a8:function(t,e,i){t.exports=i.p+\"assets/img/W020190515497091069597.fefa9457.jpg\"},c781:function(t,e,i){t.exports=i.p+\"assets/img/W020190515496383855778.e54e2e78.jpg\"},df86:function(t,e,i){}});","extractedComments":[]}